<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Certified Cloud Practitioner í•™ìŠµ ê²Œì„</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- React ë° ReactDOM CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel CDN (JSXë¥¼ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•˜ëŠ” JSë¡œ ë³€í™˜) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ ë°©ì§€ */
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // React ì»´í¬ë„ŒíŠ¸ ì½”ë“œ ì‹œì‘

        // useStateì™€ useEffectë¥¼ React ê°ì²´ì—ì„œ êµ¬ì¡° ë¶„í•´ í• ë‹¹í•˜ì—¬ ê°€ì ¸ì˜µë‹ˆë‹¤.
        const { useState, useEffect } = React; 

        function App() {
            // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ questions.json íŒŒì¼ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
            useEffect(() => {
                const fetchQuestions = async () => {
                    try {
                        const response = await fetch('questions.json'); // <-- ì—¬ê¸°ê°€ fetch API ì‚¬ìš© ë¶€ë¶„ì…ë‹ˆë‹¤.
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        const data = await response.json(); // <-- JSON ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.
                        setQuestions(data);
                    } catch (e) {
                        console.error("Failed to fetch questions:", e);
                        setError("ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì›¹ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ê³ , questions.json íŒŒì¼ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.");
                    } finally {
                        setLoading(false);
                    }
                };
                fetchQuestions();
            }, []);

            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [showFeedback, setShowFeedback] = useState(false);
            const [isCorrect, setIsCorrect] = useState(false);
            const [score, setScore] = useState(0);
            const [quizCompleted, setQuizCompleted] = useState(false);

            const currentQuestion = questions[currentQuestionIndex];

            const handleAnswerSelect = (optionIndex) => {
                if (showFeedback) return;

                setSelectedAnswer(optionIndex);
                const correct = optionIndex === currentQuestion.correctAnswer;
                setIsCorrect(correct);
                setShowFeedback(true);

                if (correct) {
                    setScore(prevScore => prevScore + 1);
                }
            };

            const handleNextQuestion = () => {
                setSelectedAnswer(null);
                setShowFeedback(false);

                if (currentQuestionIndex < questions.length - 1) {
                    setCurrentQuestionIndex(prevIndex => prevIndex + 1);
                } else {
                    setQuizCompleted(true);
                }
            };

            const handleRestartQuiz = () => {
                setCurrentQuestionIndex(0);
                setSelectedAnswer(null);
                setShowFeedback(false);
                setIsCorrect(false);
                setScore(0);
                setQuizCompleted(false);
            };

            if (quizCompleted) {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 font-inter">
                        <div className="bg-white p-8 rounded-2xl shadow-xl max-w-lg w-full text-center border border-gray-200">
                            <h2 className="text-3xl font-bold text-indigo-700 mb-6">í€´ì¦ˆ ì™„ë£Œ! ğŸ‰</h2>
                            <p className="text-xl text-gray-800 mb-4">ì´ ì ìˆ˜: {score} / {questions.length}</p>
                            <p className="text-gray-600 mb-8">ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤! í•™ìŠµ ë‚´ìš©ì„ ì˜ ë³µìŠµí•˜ì…¨ë„¤ìš”.</p>
                            <button
                                onClick={handleRestartQuiz}
                                className="w-full py-3 px-6 bg-indigo-600 text-white font-semibold rounded-xl shadow-md hover:bg-indigo-700 transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-75"
                            >
                                í€´ì¦ˆ ë‹¤ì‹œ ì‹œì‘
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 font-inter">
                    <div className="bg-white p-8 rounded-2xl shadow-xl max-w-2xl w-full border border-gray-200">
                        <div className="mb-6 text-center">
                            <h1 className="text-3xl font-extrabold text-gray-800 mb-2">
                                AWS Certified Cloud Practitioner í•™ìŠµ ê²Œì„
                            </h1>
                            <p className="text-lg text-indigo-600 font-medium">
                                {currentQuestion.domain} | ì§ˆë¬¸ {currentQuestionIndex + 1} / {questions.length}
                            </p>
                            <p className="text-gray-600 text-sm mt-1">
                                í˜„ì¬ ì ìˆ˜: {score}
                            </p>
                        </div>

                        <div className="mb-8">
                            <p className="text-xl font-semibold text-gray-900 mb-6 leading-relaxed">
                                {currentQuestion.question}
                            </p>
                            <div className="space-y-4">
                                {currentQuestion.options.map((option, index) => (
                                    <button
                                        key={index}
                                        onClick={() => handleAnswerSelect(index)}
                                        className={`w-full text-left py-3 px-5 rounded-xl border-2 transition duration-200 ease-in-out
                                            ${selectedAnswer === index
                                                ? (isCorrect ? 'bg-green-100 border-green-500 text-green-800 shadow-md' : 'bg-red-100 border-red-500 text-red-800 shadow-md')
                                                : (showFeedback && index === currentQuestion.correctAnswer ? 'bg-green-100 border-green-500 text-green-800 shadow-md' : 'bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100')
                                            }
                                            ${showFeedback && selectedAnswer !== index && index !== currentQuestion.correctAnswer ? 'opacity-60' : ''}
                                            ${showFeedback ? 'cursor-not-allowed' : 'cursor-pointer hover:shadow-lg'}
                                        `}
                                        disabled={showFeedback}
                                    >
                                        <span className="font-medium mr-2">{(index + 1)}.</span> {option}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {showFeedback && (
                            <div className="mt-8 p-6 rounded-xl shadow-inner border-2 bg-gray-50">
                                <h3 className={`text-2xl font-bold mb-3 ${isCorrect ? 'text-green-600' : 'text-red-600'}`}>
                                    {isCorrect ? 'âœ… ì •ë‹µì…ë‹ˆë‹¤!' : 'âŒ ì˜¤ë‹µì…ë‹ˆë‹¤.'}
                                </h3>
                                <p className="text-gray-800 leading-relaxed">
                                    <span className="font-semibold text-indigo-700">í•´ì„¤:</span> {currentQuestion.explanation}
                                </p>
                                <button
                                    onClick={handleNextQuestion}
                                    className="mt-6 w-full py-3 px-6 bg-indigo-600 text-white font-semibold rounded-xl shadow-md hover:bg-indigo-700 transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-75"
                                >
                                    {currentQuestionIndex < questions.length - 1 ? 'ë‹¤ìŒ ì§ˆë¬¸ìœ¼ë¡œ' : 'í€´ì¦ˆ ì™„ë£Œ'}
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
